## 按钮魔术

制作一个小魔术，用micro:bit指南针来检测附近的磁铁吧！
这是一个简单的小魔术，你可以给你的朋友们炫耀一下哦！当你移动micro:bit上A和B按钮的粘性标签时，你看起来像真的把这两个按钮切换了一样。想了解这个魔术吗？看看下面的视频就知道了。

[https://youtu.be/-9KvmPopov8](https://youtu.be/-9KvmPopov8)

### 工作原理 

这里的**魔术**真的存在于代码中。窍门就是用一块藏在手里的磁铁来告诉micro:bit切换按钮。当磁铁靠近micro:bit的时候，按钮**A** 开始像按钮**B**一样工作，而按钮**B**开始像按钮**A**一样工作。你明白了吗？

### 所需材料

在这个小魔术中，你唯一需要的东西就是你的micro:bit和任何一块小到可以放在手里的磁铁，甚至一个冰箱磁铁也能起作用。

### 步骤 1: 让按钮显示A和B

在开始编程之前，我们需要让按钮像你期待的那样工作，也就是按下按钮A，则显示‘A’，按下按钮B，则显示‘B’:

![](https://i.imgur.com/fz8wMXA.png)

### 步骤 2: 检测磁力

我们将使用micro:bit的指南针来检测磁铁。通过检测地球的磁场，指南针可以告诉我们我们面朝的方向，但是它也可以检测到附近的其他磁铁。我们将根据这个原理，通过添加**Input**菜单中**更多**选项下的`磁力`积木块来检测我们的磁铁是否靠近micro:bit。因为我们只想测量磁场强度，因此我们选择倒三角下拉菜单中的`强度`：

![](https://i.imgur.com/Gf3q7Ym.png)

### 步骤 3: 检测附近是否有磁铁

现在我们可以检测micro:bit附近的磁力。我们可以检查我们所测量到的数值是否过大，如果很大则说明附近有一个很强的磁场。
如果你曾经玩过磁铁，你就会知道它们有两端：南极和北极。根据磁铁指向micro:bit的一端，磁力测量结果将会是一个负数（例如：-100）或者是一个正数（例如：100）。我们仅仅想要知道强度是否至少是100。我们不在乎它是正数还是负数，因此我们也使用了**数学** 菜单栏中的`的绝对值` 积木块来告诉我们的代码忽略负数符号，让它将-100当作100。

所以，在下面的代码中，我们将检查磁场强度读数的绝对值是否大于100，并将检查结果存储进一个叫做`isSwitched`的新的变量中。

![](https://i.imgur.com/yzMjXuy.png)

### 步骤 4: 始终运行‘附近磁场’检测

目前，我们检测附近磁铁的代码只能运行一次。我们需要将它放入一个`无限循环`的循环中，让它不停地运行，不断地检测靠近micro:bit的磁铁。 我们也应当确保在程序开始的时候`isSwitched`被设置成了`false`。

![](https://i.imgur.com/YdvxlhQ.png)

### 步骤 5:当知道附近有磁铁时，切换按钮 

现在我们随时可以查看变量`isSwitched`的值，并且如果它的值是`true`的话，我们知道附近有磁场。让我们用它来改变按钮的作用，完成我们这个小魔术的代码。我们将添加一个`如果为 则 否则`积木块到每个按钮的代码中，并检查我们是否应该切换每个按钮的显示内容，如果`isSwitched`等于`true`:

![](https://i.imgur.com/d1lfN4r.png)

### 步骤 6: 练习一下

现在你只需要给你自己的micro:bit编程，并且在给你的朋友们表演之前，先练习几次。在你切换了按钮的标签后，试着让你的朋友们按下按钮。对于他们来说，这个小魔术将不会生效，因为他们手里并没有藏着一块磁铁。

记住，因为我们使用的是micro:bit的指南针，所以在每次我们将程序下载到micro:bit上或者初次运行我们的程序的时候，micro:bit的指南针将会需要[校准](https://support.microbit.org/support/solutions/articles/19000008874-calibrating-the-micro-bit-compass-what-does-it-mean-when-the-micro-bit-says-draw-a-circle-or-tilt)。

### 关于作者

这个项目是由Brian和Jasmine Norman共同完成的。你可以在Youtube上查看他们的 [MicroMonsters](https://www.youtube.com/channel/UCK2DviDexh_Er2QYZerZyZQ) 教学频道中的更多项目。
